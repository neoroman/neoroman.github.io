<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>GraphQL-tutorial | NeoRoman</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="GraphQL-tutorial" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Contents GraphQL 이란? 왜 GraphQL 인가? GraphQL의 장점과 단점 GraphQL과 오픈소스: Open API 및 Swagger GraphQL 준비 GraphQL 문법 GraphQL 시작(start) GraphQL 끝(final) Further Study References" />
<meta property="og:description" content="Contents GraphQL 이란? 왜 GraphQL 인가? GraphQL의 장점과 단점 GraphQL과 오픈소스: Open API 및 Swagger GraphQL 준비 GraphQL 문법 GraphQL 시작(start) GraphQL 끝(final) Further Study References" />
<link rel="canonical" href="http://localhost:3000/GraphQL-tutorial/" />
<meta property="og:url" content="http://localhost:3000/GraphQL-tutorial/" />
<meta property="og:site_name" content="NeoRoman" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-06-30T14:17:49+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="GraphQL-tutorial" />
<script type="application/ld+json">
{"headline":"GraphQL-tutorial","dateModified":"2021-06-30T14:17:49+09:00","datePublished":"2021-06-30T14:17:49+09:00","url":"http://localhost:3000/GraphQL-tutorial/","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:3000/GraphQL-tutorial/"},"description":"Contents GraphQL 이란? 왜 GraphQL 인가? GraphQL의 장점과 단점 GraphQL과 오픈소스: Open API 및 Swagger GraphQL 준비 GraphQL 문법 GraphQL 시작(start) GraphQL 끝(final) Further Study References","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:3000/feed.xml" title="NeoRoman" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">NeoRoman</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">GraphQL-tutorial</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2021-06-30T14:17:49+09:00" itemprop="datePublished">Jun 30, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <hr />
<h2 id="contents">Contents</h2>
<ul>
  <li><a href="/GraphQL-tutorial/#GraphQL%20이란?">GraphQL 이란?</a></li>
  <li><a href="/GraphQL-tutorial/#왜%20GraphQL%20인가?">왜 GraphQL 인가?</a></li>
  <li><a href="/GraphQL-tutorial/#GraphQL의%20장점과%20단점">GraphQL의 장점과 단점</a></li>
  <li><a href="/GraphQL-tutorial/#GraphQL과%20오픈소스:%20Open%20API%20및%20Swagger">GraphQL과 오픈소스: Open API 및 Swagger</a></li>
  <li><a href="/GraphQL-tutorial/#GraphQL%20준비">GraphQL 준비</a></li>
  <li><a href="/GraphQL-tutorial/#GraphQL%20문법">GraphQL 문법</a></li>
  <li><a href="/GraphQL-tutorial/#GraphQL%시작">GraphQL 시작(start)</a></li>
  <li><a href="/GraphQL-tutorial/#GraphQL%20끝">GraphQL 끝(final)</a></li>
  <li><a href="/GraphQL-tutorial/#Further%20Study">Further Study</a></li>
  <li><a href="/GraphQL-tutorial/#References">References</a></li>
</ul>

<hr />

<p><br /></p>

<h1 id="graphql-이란"><a href="#GraphQL 이란?">GraphQL 이란?</a></h1>
<ul>
  <li>API를 위한 쿼리 언어</li>
  <li>기 존재하는 데이터 쿼리를 수행하기 위한 런타임</li>
  <li>API 진화의 강력한 개발자 도구: playground</li>
</ul>

<p><br /></p>

<h1 id="왜-graphql-인가"><a href="#왜 GraphQL 인가?">왜 GraphQL 인가?</a></h1>
<ul>
  <li>Over fetching
    <ul>
      <li>기존, 예를들어 사용자 정보에 불필요한 부분이 REST API에 포함되있다면, Front 전체를 다 받아서 parsing 해야함</li>
      <li>GraphQL을 사용하면 Front가 원하는 정보만 요청할 수 있음</li>
      <li><code class="language-plaintext highlighter-rouge">Over fetching</code> 해결!</li>
    </ul>
  </li>
  <li>Under fetching
    <ul>
      <li>기존, 예를들어 영화 앱을 개발하는 경우 비디오 정보와 제작자 정보를 받아와야했음</li>
      <li>하나의 주제를 표출하기 위해 여러 개의 REST API를 호출하는 해야하는 것을 <code class="language-plaintext highlighter-rouge">Under fetching</code>이라함</li>
      <li>GraphQL을 사용하면 Front가 한번의 요청으로 원하는 데이터를 얻을 수 있음</li>
      <li><code class="language-plaintext highlighter-rouge">Under fetching</code> 해결!</li>
    </ul>
  </li>
  <li>Backend 개발
    <ul>
      <li>Schema와 Resolver를 한 번만 구현 해놓으면 추가 patch 비용이 거의 들지 않음</li>
      <li>API 문서화는 주석으로 대신할 수 있음 (이력관리는 swagger나 마찬가지임)</li>
      <li>기본 Framework: <a href="https://www.apollographql.com/server/">Apollo GraphQL</a></li>
      <li>유용한 툴: <a href="https://github.com/sequelize/sequelize-auto">Sequelize Auto</a>, <a href="https://github.com/ardatan/graphql-tools">GraphQL Tools</a></li>
    </ul>
  </li>
  <li>간편해진 Loading, Error, Success 처리
    <ul>
      <li>Backend에서는 return type이 이미 지정되있으므로 error는 throw로 처리</li>
      <li>Front에서는 동일한 Error에 대해서 예외처리만 하면 됨</li>
    </ul>
  </li>
  <li>Playground GUI 테스트 환경
    <ul>
      <li>기존, API 문서와 Postman 을 대치 가능</li>
      <li>Playground 에서 쿼리 Loading, Error, Success를 바로 확인 가능</li>
      <li>검색 기능이 내장된 Document 기본 제공</li>
      <li>Schema 다운로드 기능 기본 제공</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h1 id="graphql-장점과-단점"><a href="#GraphQL 장점과 단점">GraphQL 장점과 단점</a></h1>
<ul>
  <li>GraphQL 장점
    <ul>
      <li>GraphQL 스키마는 GraphQL 애플리케이션(Front)에 신뢰할 수 있는 단일 소스를 하나 제공 =&gt; Query.graphql or Query.json</li>
      <li>GraphQL 호출은 단일 왕복으로 처리되며 클라이언트는 오버페칭 없이 요청한 결과만 얻음</li>
      <li>엄격하게 정의된 데이터 유형은 클라이언트와 서버 간 통신 오류를 줄여줌</li>
      <li>GraphQL  클라이언트(Front)는 사용 가능한 데이터 유형 목록을 요청할 수 있음</li>
      <li>자동 생성 문서는 playground를 통해 제공</li>
      <li>GraphQL은 애플리케이션 API가 기존 쿼리를 중단하지 않고도 진화할 수 있도록 허용</li>
      <li>REST API로 사용할 수 없는 기능을 제공하기 위해 대부분의 오픈소스 GraphQL 확장 기능을 사용할 수 있음</li>
      <li>GraphQL은 특정 애플리케이션 아키텍처를 지정하지 않으므로 기존 REST API에 추가하여 기존 API 관리 툴과 연동할 수 있음</li>
    </ul>
  </li>
  <li>GraphQL 단점
    <ul>
      <li>REST API에 친숙한 개발자의 경우 GraphQL를 학습하는 데 시간이 필요</li>
      <li>GraphQL은 데이터 쿼리의 상당 작업을 서버측으로 옮겨 서버 개발자 작업의 복잡성이 커짐</li>
      <li>구현 방식에 따라 GraphQL은 REST API가 아닌 다른 API 관리 전략을 필요로 할 수 있음 (특히 비용 제한과 가격을 고려하는 경우)</li>
      <li>캐싱이 REST보다 훨씬 복잡함</li>
      <li>API 유지관리자의 경우 유지 관리 가능한 GraphQL 스키마를 작성하기 위한 추가 태스크를 수행해야 함</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h1 id="graphql과-오픈소스-open-api-및-swagger"><a href="#GraphQL과 오픈소스: Open API 및 Swagger">GraphQL과 오픈소스: Open API 및 Swagger</a></h1>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift">  <span class="kt">GraphQL은</span> <span class="kt">Facebook에서</span> <span class="n">개발했으며</span> <span class="mi">2012</span><span class="n">년에는</span> <span class="n">모바일</span> <span class="n">애플리케이션을</span> <span class="n">위해</span> <span class="n">사용됨</span>
  <span class="kt">GraphQL</span> <span class="n">사양은</span> <span class="mi">2015</span><span class="n">년에</span> <span class="n">오픈소스로</span> <span class="n">공개됨</span>
  <span class="n">현재는</span> <span class="kt">GraphQL</span> <span class="kt">Foundation이</span> <span class="n">감독하고</span> <span class="n">있음</span></code></pre></figure>

<ul>
  <li><a href="https://www.apollographql.com/">Apollo</a>: 프론트엔드 클라이언트 라이브러리(<a href="https://www.apollographql.com/client/">Apollo Client</a>)와 백엔드 서버 프레임워크(<a href="https://www.apollographql.com/server/">Apollo Server</a>)를 포함하는 GraphQL 플랫폼</li>
  <li><a href="https://offix.dev/">Offix</a>: 애플리케이션에 도달할 수 없는 경우에도 GraphQL 변형 및 쿼리를 실행할 수 있도록 허용하는 오프라인 클라이언트</li>
  <li><a href="https://graphback.dev/">Graphback</a>: GraphQL 지원 Node.js 서버를 생성하기 위한 커맨드라인 클라이언트</li>
  <li><a href="https://github.com/IBM/openapi-to-graphql">OpenAPI-GraphQL</a>: OpenAPI 사양 또는 Swagger로 설명된 API를 GraphQL로 번역하기 위한 커맨드라인 인터페이스 및 라이브러리</li>
</ul>

<p><br /></p>

<h1 id="graphql-준비"><a href="#GraphQL%20준비">GraphQL 준비</a></h1>
<ul>
  <li><a href="https://github.com/neoroman/GraphQL-tutorial">GraphQL tutorial</a> 튜토리얼 준비물 다운로드
    <ul>
      <li>서버개발자: <a href="https://github.com/neoroman/GraphQL-tutorial#graphql-tutorial">REAME.md</a>의 내용을 읽고 starter &gt; final 순으로 진행</li>
      <li>앱개발자: <a href="https://github.com/neoroman/GraphQL-tutorial/tree/main/final#graphql-tutorial-for-final">Final &gt; README.md</a> 내용을 읽고 final 설치 후 각각 <a href="https://github.com/neoroman/GraphQL-tutorial/tree/main/clientSample/ios#ios-sample-for-graphql-tutorial">iOS</a>, <a href="https://github.com/neoroman/GraphQL-tutorial/tree/main/clientSample/android#android-sample-for-graphql-tutorial">Android</a>로 진행</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h1 id="graphql-문법"><a href="#GraphQL%20문법">GraphQL 문법</a></h1>
<ul>
  <li>GraphQL Schema Language Cheat Sheet
<img src="https://miro.medium.com/max/5052/1*HaEeoGrja2IGUxzvmj5Vnw.png" alt="GraphQL Cheat Sheet" /></li>
</ul>

<p><br />
<br /></p>

<h1 id="graphql-시작-github"><a href="#GraphQL 시작">GraphQL 시작</a> (<a href="https://github.com/neoroman/GraphQL-tutorial/tree/main/starter#graphql-tutorial-starter">github</a>)</h1>

<h3 id="서버-설치">서버 설치</h3>

<ol>
  <li>MySQL 서버 설치
    <ul>
      <li><code class="language-plaintext highlighter-rouge">mysql</code>  홈브루( <a href="https://brew.sh/index_ko">HomeBrew</a> )를 통한 <code class="language-plaintext highlighter-rouge">MySQL</code> 설치
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ brew install mysql
</code></pre></div>        </div>
      </li>
      <li><code class="language-plaintext highlighter-rouge">MySQL</code> 데몬 서비스 등록하기 (선택)
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ brew services start mysql
</code></pre></div>        </div>
      </li>
      <li><code class="language-plaintext highlighter-rouge">MySQL</code> 데이터베이스 <code class="language-plaintext highlighter-rouge">root</code> 사용자 암호 설정하기
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ mysql -uroot
 mysql&gt; USE mysql
 mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY 'qwer1234';
 mysql&gt; FLUSH PRIVILEGES;
 mysql&gt; quit
</code></pre></div>        </div>
      </li>
      <li><code class="language-plaintext highlighter-rouge">sample_db_graphql</code> 데이터 베이스 생성하기
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ mysql -uroot -p
 mysql&gt; CREATE DATABASE sample_db_graphql;
 mysql&gt; quit
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">seeders/dump-sample_db_graphql.sql</code> 파일로부터 DB 복원하기
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mysql -uroot -p sample_db_graphql &lt; ./seeders/dump-sample_db_graphql.sql
</code></pre></div>    </div>
  </li>
  <li>npm 의존성 패키지 설치하기
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm install
</code></pre></div>    </div>
    <p>3.1 If <code class="language-plaintext highlighter-rouge">sh: nodemon: command not found</code> error occurred</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   $ npm i -g nodemon
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="서버-설치-1">서버 설치</h3>
<ol>
  <li>npm 으로 서버 시작하기
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm start
</code></pre></div>    </div>
    <ul>
      <li>다음과 같은 메세지와 <code class="language-plaintext highlighter-rouge">localhost</code>의 4000번 포트에 서버가 시작된다.</li>
    </ul>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> [nodemon] 2.0.7
 [nodemon] to restart at any time, enter `rs`
 [nodemon] watching path(s): *.*
 [nodemon] watching extensions: js,mjs,json
 [nodemon] starting `babel-node index.js`
 Graphql Server Running on localhost:4000
</code></pre></div>    </div>
    <blockquote>
      <p>언제든지 <code class="language-plaintext highlighter-rouge">Ctrl-C</code>를 눌러서 서버를 중단할 수 있다.</p>
    </blockquote>
  </li>
</ol>

<p><br /></p>

<h3 id="generate-models-for-graphql">Generate models for GraphQL</h3>

<ol>
  <li>
    <p>다음 주소를 즐겨사용하는 웹 브라우져 주소창에 넣고 이동한다. 
    <a href="http://localhost:4000/play">http://localhost:4000/play</a> (구글 크롬 추천)</p>
  </li>
  <li>다음과 같이 쿼리를 입력해본다.
    <div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">query</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="n">getUserInfo</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s2">"neoroman"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="n">id</span><span class="w">
     </span><span class="n">name</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
    <p><img src="https://github.com/neoroman/GraphQL-tutorial/raw/main/screenshots/02_input_query_in_playground.gif" alt="Playground.GIF" /></p>
  </li>
  <li>플레이 버튼을 누르면 다음과 같은 오류가 발생한다.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
Error: Cannot return null for non-nullable field Query.getUserInfo.
...
</code></pre></div>    </div>
    <blockquote>
      <p>이 오류는 GraphQL 리졸버(resolver)와 MySQL와 연결해주는 모델(model)이 부재하여 발생한 것이다.</p>
    </blockquote>
  </li>
  <li><code class="language-plaintext highlighter-rouge">sequelize-auto</code> 설치 (설치하지 않았다면)
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ brew sequelize-auto
</code></pre></div>    </div>
  </li>
  <li>MySQL 데이터베이스 <code class="language-plaintext highlighter-rouge">root</code> 패스워드 = <code class="language-plaintext highlighter-rouge">qwer1234</code>로 <code class="language-plaintext highlighter-rouge">sequelize-auto</code>를 실행하여 <code class="language-plaintext highlighter-rouge">GraphQL Schema</code>를 생성
    <ul>
      <li>경고: 패스워드를 커맨드 입력란에 기입하는 것은 보안에 위험할 수 있음
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sequelize-auto -c config/sequelize-auto.config.json -x qwer1234
</code></pre></div>        </div>
        <blockquote>
          <p>이제 <code class="language-plaintext highlighter-rouge">{TABLE_NAME}.js</code> 파일들을 <code class="language-plaintext highlighter-rouge">./models</code> 내에서 확인할 수 있다.</p>
        </blockquote>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">graphql/resolvers.js</code> 파일을 연다.
    - 다음의 코드와 다른 부분을 수정한다.
    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
     <span class="na">Query</span><span class="p">:</span> <span class="p">{</span>
         <span class="na">getUserInfo</span><span class="p">:</span> <span class="k">async</span> <span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">info</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
             <span class="k">try</span> <span class="p">{</span> 
                 <span class="c1">// 1</span>
                 <span class="kd">let</span> <span class="nx">userId</span> <span class="o">=</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">args</span><span class="p">.</span><span class="nx">id</span> <span class="p">}</span>
                 <span class="kd">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">AdminUser</span><span class="p">.</span><span class="nx">findAll</span><span class="p">({</span> <span class="na">where</span><span class="p">:</span> <span class="nx">userId</span> <span class="p">});</span>
                 <span class="k">return</span> <span class="nx">items</span><span class="p">;</span> 
             <span class="p">}</span> 
             <span class="k">catch</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);}</span> 
         <span class="p">}</span>
     <span class="p">},</span>
     <span class="na">Mutation</span><span class="p">:</span> <span class="p">{</span>
         <span class="na">putUserInfo</span><span class="p">:</span> <span class="k">async</span> <span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">info</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
             <span class="k">try</span> <span class="p">{</span>
                 <span class="c1">// 2</span>
                 <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">AdminUser</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="na">where</span><span class="p">:</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">args</span><span class="p">.</span><span class="nx">id</span> <span class="p">}</span> <span class="p">});</span>
                 <span class="k">if</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
                     <span class="k">if</span> <span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">password</span><span class="p">)</span> <span class="p">{</span>
                         <span class="nx">user</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">password</span><span class="dl">'</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nx">password</span><span class="p">);</span>
                         <span class="nx">user</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">updateTime</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()));</span>
                     <span class="p">}</span>
                     <span class="k">if</span> <span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">email</span><span class="p">)</span> <span class="p">{</span>
                         <span class="nx">user</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">email</span><span class="dl">'</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nx">email</span><span class="p">);</span>
                     <span class="p">}</span>
                     <span class="k">return</span> <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
                 <span class="p">}</span>
                 <span class="k">return</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">putUserInfo: cannot find user:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
             <span class="p">}</span>
             <span class="k">catch</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                 <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
                 <span class="k">return</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">putUserInfo</span><span class="dl">"</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
             <span class="p">};</span>
         <span class="p">}</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div>    </div>
    <ul>
      <li>1번은 args.id를 이용해서 <code class="language-plaintext highlighter-rouge">AdminUser</code> 테이블을 조회한 결과를 리턴한다.</li>
      <li>2번은 args.id등 입력 인자들을 이용해서 <code class="language-plaintext highlighter-rouge">AdminUser</code> 테이블의 사용자 정보를 수정한다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">play</code> 버튼을 다시 눌러보면, 이제 성공 결과를 확인할 수 있다. 짜잔
  <img src="https://github.com/neoroman/GraphQL-tutorial/raw/main/screenshots/03_playground_result_success.png" alt="Playground Query Success" /></li>
</ol>

<p><br />
<br /></p>

<p><!-- * [GraphQL 끝](GraphQL 끝) --></p>
<h1 id="graphql-끝-github"><a href="#GraphQL 끝">GraphQL 끝</a> (<a href="https://github.com/neoroman/GraphQL-tutorial/tree/main/final#graphql-tutorial-for-final">github</a>)</h1>
<ul>
  <li>Sample of GraphQL-Yoga + Express + JWT</li>
</ul>

<p><br /></p>

<h3 id="서버-설치-2">서버 설치</h3>

<ol>
  <li>MySQL 서버 설치
    <ul>
      <li><code class="language-plaintext highlighter-rouge">mysql</code>  홈브루( <a href="https://brew.sh/index_ko">HomeBrew</a> )를 통한 <code class="language-plaintext highlighter-rouge">MySQL</code> 설치
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ brew install mysql
</code></pre></div>        </div>
      </li>
      <li><code class="language-plaintext highlighter-rouge">MySQL</code> 데몬 서비스 등록하기 (선택)
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ brew services start mysql
</code></pre></div>        </div>
      </li>
      <li><code class="language-plaintext highlighter-rouge">MySQL</code> 데이터베이스 <code class="language-plaintext highlighter-rouge">root</code> 사용자 암호 설정하기
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ mysql -uroot
 mysql&gt; USE mysql
 mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY 'qwer1234';
 mysql&gt; FLUSH PRIVILEGES;
 mysql&gt; quit
</code></pre></div>        </div>
      </li>
      <li><code class="language-plaintext highlighter-rouge">sample_db_graphql</code> 데이터 베이스 생성하기
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ mysql -uroot -p
 mysql&gt; CREATE DATABASE sample_db_graphql;
 mysql&gt; quit
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">seeders/dump-sample_db_graphql.sql</code> 파일로부터 DB 복원하기
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mysql -uroot -p sample_db_graphql &lt; ./seeders/dump-sample_db_graphql.sql
</code></pre></div>    </div>
  </li>
  <li>npm 의존성 패키지 설치하기
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm install
</code></pre></div>    </div>
    <p>3.1 If <code class="language-plaintext highlighter-rouge">sh: nodemon: command not found</code> error occurred</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   $ npm i -g nodemon
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="서버-실행">서버 실행</h3>
<ol>
  <li>npm 으로 서버 시작하기
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm start
</code></pre></div>    </div>
    <ul>
      <li>다음과 같은 메세지와 <code class="language-plaintext highlighter-rouge">localhost</code>의 4000번 포트에 서버가 시작된다.</li>
    </ul>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> [nodemon] 2.0.7
 [nodemon] to restart at any time, enter `rs`
 [nodemon] watching path(s): *.*
 [nodemon] watching extensions: js,mjs,json
 [nodemon] starting `babel-node index.js`
 Graphql Server Running on localhost:4000
</code></pre></div>    </div>
    <blockquote>
      <p>언제든지 <code class="language-plaintext highlighter-rouge">Ctrl-C</code>를 눌러서 서버를 중단할 수 있다.</p>
    </blockquote>
  </li>
  <li>
    <p>Violla, now you can connect localhost:4000/play on your web brower, see next <a href="https://github.com/neoroman/GraphQL-tutorial/tree/main/final#graphql-playground">section</a></p>
  </li>
  <li>(TODO) 심화학습 추가하기</li>
</ol>

<p><br /></p>

<h3 id="graphql-playground">GraphQL playground</h3>
<ol>
  <li>Open your favorite web browser (recommend Goolge Chrome)</li>
  <li>Paste and go to http://localhost:4000/play</li>
  <li>You could check like followings:
   <a href="http://localhost:4000/play"><img src="https://github.com/neoroman/GraphQL-tutorial/blob/main/screenshots/01_GraphQL-playground.png?raw=true" alt="Screenshot" /></a></li>
  <li>Copy and paste <a href="https://raw.githubusercontent.com/neoroman/GraphQL-tutorial/main/final/graphql/playgroundQuery.txt">graphql/playgroundQuery.txt</a> queries into left pane of GraphQL playground</li>
</ol>

<p><br /></p>

<h3 id="authentication-optional">Authentication (Optional)</h3>
<ol>
  <li>Client call /secure with ID and Password</li>
  <li>/secure response is JWT(JSON Web Token)</li>
  <li>Client set header of request with token: <code class="language-plaintext highlighter-rouge">{given token}</code></li>
  <li>Check token validation with /secure/check</li>
  <li>Client receive error unless JWT header for request</li>
</ol>

<p><br /></p>

<h1 id="further-study"><a href="#Further Study">Further Study</a></h1>
<ul>
  <li><a href="https://github.com/ardatan/graphql-tools">GraphQL Tools</a> 활용 방법 Study</li>
  <li>파일 업로드 지원</li>
  <li>GraphQL 구독을 사용한 실시간 기능</li>
  <li>TypeScript 지원</li>
  <li>쿼리 성능 추적</li>
</ul>

<p><br /></p>

<h1 id="references"><a href="#References">References</a></h1>
<ul>
  <li><a href="https://www.graphql.com/guides/">GraphQL: Guides and Best Practices</a></li>
  <li><a href="https://darrengwon.tistory.com/289">GraphQL-yoga 소개 및 간단한 활용</a></li>
  <li><a href="https://velog.io/@cadenzah/graphql-node-02-getting-started">GraphQL - Node Tutorial - 02. Getting Started</a></li>
  <li><a href="https://www.redhat.com/ko/topics/api/what-is-graphql">Redhat: GraphQL이란?</a></li>
</ul>

<!-- 
You’ll find this post in your `_posts` directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run `jekyll serve`, which launches a web server and auto-regenerates your site when a file is updated.

Jekyll requires blog post files to be named according to the following format:

`YEAR-MONTH-DAY-title.MARKUP`

Where `YEAR` is a four-digit number, `MONTH` and `DAY` are both two-digit numbers, and `MARKUP` is the file extension representing the format used in the file. After that, include the necessary front matter. Take a look at the source for this post to get an idea about how it works.

Jekyll also offers powerful support for code snippets:


<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">print_hi</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"Hi, </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
<span class="n">print_hi</span><span class="p">(</span><span class="s1">'Tom'</span><span class="p">)</span>
<span class="c1">#=&gt; prints 'Hi, Tom' to STDOUT.</span></code></pre></figure>


Check out the [Jekyll docs][jekyll-docs] for more info on how to get the most out of Jekyll. File all bugs/feature requests at [Jekyll’s GitHub repo][jekyll-gh]. If you have questions, you can ask them on [Jekyll Talk][jekyll-talk]. -->


  </div><a class="u-url" href="/GraphQL-tutorial/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">NeoRoman</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">NeoRoman</li><li><a class="u-email" href="mailto:neoroman@gmail.com">neoroman@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/neoroman"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">neoroman</span></a></li><li><a href="https://www.twitter.com/neoroman"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">neoroman</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Experienced iOS Developer adept in bringing forth expertise in design,  installation, testing and maintenance of software systems.   Experienced with the latest cutting edge development tools and procedures.    Able to effectively self-manage during independent projects,  as well as collaborate as part of a productive team.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
